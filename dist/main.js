!function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var r=(()=>{const e={};return{subscribe:(t,i)=>{e[t]||(e[t]=[]),e[t].push(i)},unsubscribe:(t,i)=>{e[t]&&(e[t]=e[t].filter(e=>e!==i))},publish:(t,i)=>{Array.isArray(e[t])&&e[t].forEach(e=>e(i))}}})();var s=e=>{const t=e.querySelector(".form-container"),i=t.childNodes[1],s=i.childNodes[1],n=e.querySelector(".add"),a=i.childNodes[15].childNodes[1],d=e.querySelector("#cancel");function o(){t.classList.toggle("visible")}r.publish("createFormListener",i),r.publish("createAddListener",n),r.publish("createCancelListener",d),r.subscribe("addForm",(function(){s.textContent="Add Task",a.value="Add",i.setAttribute("id",""),o()})),r.subscribe("editForm",(function(e){s.textContent="Edit Task",a.value="Edit",i.setAttribute("id",e.id),i.title.value=e.title,i["datetime-local"].value=e.dueDate,i.priority.value=e.priority,o()})),r.subscribe("submitForm",(function(){(function(e){const t=new FormData(e),i={title:t.get("title"),datetime:t.get("datetime-local"),priority:t.get("priority")};"Add"===a.value&&r.publish("addTask",i);"Edit"===a.value&&r.publish("editTask",{id:e.id,taskInfo:i})})(i),o(),i.reset()})),r.subscribe("cancelForm",o)};var n=()=>{r.subscribe("createEditListener",(function({task:e,edit:t}){t.addEventListener("click",()=>r.publish("editForm",e))})),r.subscribe("createDeleteListener",(function({task:e,trash:t}){t.addEventListener("click",()=>r.publish("removeTask",e))})),r.subscribe("createFormListener",(function(e){e.addEventListener("submit",e=>{e.preventDefault(),r.publish("submitForm")})})),r.subscribe("createAddListener",(function(e){e.addEventListener("click",()=>r.publish("addForm"))})),r.subscribe("createCancelListener",(function(e){e.addEventListener("click",()=>r.publish("cancelForm"))}))};var a=(e=>{const t=(t,i,r)=>{const s=e.createElement(t);return i&&Object.keys(i).forEach(e=>{s.setAttribute(e,i[e])}),r&&(s.textContent=r),s},i=e=>{const i=t("div",{class:"task-header"});return i.appendChild(t("div",{class:"deadline"},e.dueDate)),i.appendChild((e=>{const i=t("div",{class:"controls"}),s=t("button").appendChild(t("i",{class:"far fa-edit"})),n=t("button").appendChild(t("i",{class:"far fa-trash-alt"}));return r.publish("createEditListener",{task:e,edit:s}),r.publish("createDeleteListener",{task:e,trash:n}),i.appendChild(s),i.appendChild(n),i})(e)),i};return{createElement:e=>{const r=t("li",{id:e.id,class:`task ${e.priority}-priority`});return r.appendChild(i(e)),r.appendChild(t("div",{class:"task-text"},e.title)),r},updateTitle:(e,t)=>{e.childNodes[1].textContent=t},updateDueDate:(e,t)=>{e.childNodes[0].childNodes[0].textContent=t},updatePriority:(e,t)=>{e.setAttribute("class",`task ${t.toLowerCase()}-priority`)}}})(document);var d=class{constructor(e,t,i,r,s){this.id=e,this.title=t||"",this.dueDate=i||"",this.priority=r||"Low",this.isComplete=s||!1,this.element=a.createElement(this)}set id(e){this._id=e}get id(){return this._id}set title(e){this._title=e,this.element&&a.updateTitle(this.element,e)}get title(){return this._title}set dueDate(e){this._dueDate=e,this.element&&a.updateDueDate(this.element,e)}get dueDate(){return this._dueDate}set priority(e){this._priority=e,this.element&&a.updatePriority(this.element,e)}get priority(){return this._priority}set isComplete(e){this._isComplete=e}get isComplete(){return this._isComplete}set element(e){this._element=e}get element(){return this._element}};var o=e=>{const t=[];let i=0;function s(e){t.push(new d(i++,e.title,e.datetime,e.priority,!1)),l()}function n(e){t.splice(a(e),1),l()}r.subscribe("addTask",s),r.subscribe("editTask",(function({taskId:e,taskInfo:t}){const i=o(e);i.title=t.title,i.dueDate=t.datetime,i.priority=t.priority})),r.subscribe("removeTask",n);const a=e=>t.findIndex(t=>t.id===e.id),o=e=>t.reduce(t=>t.id===e),l=()=>{e.innerHTML="",t.forEach(t=>e.appendChild(t.element))};return{addTask:s,removeTask:n,renderTasks:l}};window.addEventListener("load",(function(){n(),s(document),o(document.querySelector("ul"))}))}]);